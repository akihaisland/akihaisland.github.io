import{e as k,u as y,f as x,g as v,o as c,c as l,a as t,F as f,r as w,h as b,i as N,j as S,t as h,n as q,p as B,b as C,_ as $,k as I,l as M,w as A,m as F,q as g,s as H,v as V}from"./index-e61785bb.js";import{I as D}from"./InfoHead-ae1a6abb.js";import{L as P}from"./LoadingBox-c4de8375.js";const L=m=>(B("data-v-72456d02"),m=m(),C(),m),j={class:"search_res_show"},z={class:"search_res_list"},E={class:"search_item_box"},R={class:"img_box"},G=["src"],J={class:"detail_box"},K=["href"],O={class:"search_item_volumn"},Q={class:"search_item_type"},T={class:"search_item_desc"},U={class:"page_router_box"},W={class:"page_sel_btn_box"},X=L(()=>t("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M5 0, L5 20",fill:"transparent",stroke:"red","stroke-width":"1.5"}),t("path",{d:"M15 0, L5 10, L15 20",fill:"transparent",stroke:"red","stroke-width":"1.5"})],-1)),Y=[X],Z=["title","onClick"],ee=L(()=>t("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M15 0, L15 20",fill:"transparent",stroke:"red","stroke-width":"1.5"}),t("path",{d:"M5 0, L15 10, L5 20",fill:"transparent",stroke:"red","stroke-width":"1.5"})],-1)),se=[ee],te=k({__name:"SearchBoard",setup(m){const n=y(),o=x(),p=v(()=>"page"in n.query?Number(n.query.page):1),d=v(()=>{const s=[];for(let a=0;a<o.animes_search_res.length;a++){const e=o.animes_search_res[a][0],_={name:e.srcs.vod_name,img:e.srcs.vod_pic,vod_time:e.srcs.vod_pubdate,vod_remarks:e.srcs.vod_remarks,vod_blurb:e.srcs.vod_blurb,vod_class:e.srcs.vod_class};_.vod_time==""&&(_.vod_time=e.srcs.vod_year),s.push(_)}return s}),u=v(()=>{let s=1,a=!0,e=!0;"page"in n.query&&(s=Number(n.query.page)),s==1&&(a=!1),s==o.search_res_page_num&&(e=!1),o.search_res_page_num==0&&(a=!1,e=!1);const _=[];if(o.search_res_page_num<=5)for(let r=1;r<=o.search_res_page_num;r++)_.push(r);else if(s<=3)for(let r=1;r<=5;r++)_.push(r);else if(s+2>o.search_res_page_num)for(let r=o.search_res_page_num-4;r<=o.search_res_page_num;r++)_.push(r);else for(let r=s-2;r<=s+2;r++)_.push(r);return{first_page:a,last_page:e,pages2show:_}});function i(s){if(s>=1&&s<=o.search_res_page_num){let a="";"animeName"in n.query&&(a=n.query.animeName),S.push("/anime/search?animeName="+a+"&page="+s)}}return(s,a)=>(c(),l("div",j,[t("div",z,[t("div",E,[(c(!0),l(f,null,w(d.value,(e,_)=>(c(),l("div",{class:"search_item",key:_},[t("div",R,[t("img",{src:e.img,alt:"",srcset:""},null,8,G)]),t("div",J,[t("a",{href:"#/anime/play?animeName="+e.name,class:"search_item_title"},h(e.name),9,K),t("div",O,h(e.vod_time)+" | "+h(e.vod_remarks),1),t("div",Q,h(e.vod_class),1),t("div",T,h(e.vod_blurb),1)])]))),128))]),t("div",U,[t("div",W,[u.value.first_page?(c(),l("button",{key:0,class:"page_sel_btn",title:"First Page",onClick:a[0]||(a[0]=e=>i(1))},Y)):b("",!0),(c(!0),l(f,null,w(u.value.pages2show,(e,_)=>(c(),l("button",{class:q(["page_sel_btn",{now_page:e==p.value}]),key:_,title:"Page "+e,onClick:r=>i(e)},h(e),11,Z))),128)),u.value.last_page?(c(),l("button",{key:1,class:"page_sel_btn",title:"Last page",onClick:a[1]||(a[1]=e=>i(N(o).search_res_page_num))},se)):b("",!0)])])])]))}}),ae=$(te,[["__scopeId","data-v-72456d02"]]),re={class:"page_content"},oe={class:"head_box"},_e={class:"search_content_place"},le=k({__name:"AnimeSearch",setup(m){const n=y(),o=x(),p=I(),d=M(!1);function u(){d.value=!0;const i=n.query;if("animeName"in i){const s=i.animeName;if(s=="")return;let a=1;"page"in i?a=Number(i.page):p.search_anime(s),o.search_animes(s,a).then(()=>{d.value=!1})}else d.value=!1}return A(()=>n.query,()=>{u()},{deep:!0}),F(()=>{u()}),(i,s)=>(c(),l("div",re,[t("div",oe,[g(D)]),t("div",_e,[g(ae)]),H(g(P,{style:{width:"3em",height:"3em"}},null,512),[[V,d.value]])]))}});export{le as default};
