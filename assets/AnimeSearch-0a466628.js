import{I as L}from"./InfoHead-e2677bf5.js";import{e as k,u as y,f as x,g as v,o as l,c as d,a as s,F as g,r as f,h as w,i as S,j as q,t as u,n as B,p as C,b as $,_ as I,k as M,w as A,l as F,m as b}from"./index-85ec912d.js";const N=h=>(C("data-v-72456d02"),h=h(),$(),h),H={class:"search_res_show"},V={class:"search_res_list"},P={class:"search_item_box"},j={class:"img_box"},z=["src"],D={class:"detail_box"},E=["href"],R={class:"search_item_volumn"},G={class:"search_item_type"},J={class:"search_item_desc"},K={class:"page_router_box"},O={class:"page_sel_btn_box"},Q=N(()=>s("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("path",{d:"M5 0, L5 20",fill:"transparent",stroke:"red","stroke-width":"1.5"}),s("path",{d:"M15 0, L5 10, L15 20",fill:"transparent",stroke:"red","stroke-width":"1.5"})],-1)),T=[Q],U=["title","onClick"],W=N(()=>s("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("path",{d:"M15 0, L15 20",fill:"transparent",stroke:"red","stroke-width":"1.5"}),s("path",{d:"M5 0, L15 10, L5 20",fill:"transparent",stroke:"red","stroke-width":"1.5"})],-1)),X=[W],Y=k({__name:"SearchBoard",setup(h){const n=y(),o=x(),m=v(()=>"page"in n.query?Number(n.query.page):1),p=v(()=>{const t=[];for(let r=0;r<o.animes_search_res.length;r++){const e=o.animes_search_res[r][0],_={name:e.srcs.vod_name,img:e.srcs.vod_pic,vod_time:e.srcs.vod_pubdate,vod_remarks:e.srcs.vod_remarks,vod_blurb:e.srcs.vod_blurb,vod_class:e.srcs.vod_class};_.vod_time==""&&(_.vod_time=e.srcs.vod_year),t.push(_)}return t}),i=v(()=>{let t=1,r=!0,e=!0;"page"in n.query&&(t=Number(n.query.page)),t==1&&(r=!1),t==o.search_res_page_num&&(e=!1),o.search_res_page_num==0&&(r=!1,e=!1);const _=[];if(o.search_res_page_num<=5)for(let a=1;a<=o.search_res_page_num;a++)_.push(a);else if(t<=3)for(let a=1;a<=5;a++)_.push(a);else if(t+2>o.search_res_page_num)for(let a=o.search_res_page_num-4;a<=o.search_res_page_num;a++)_.push(a);else for(let a=t-2;a<=t+2;a++)_.push(a);return{first_page:r,last_page:e,pages2show:_}});function c(t){if(t>=1&&t<=o.search_res_page_num){let r="";"animeName"in n.query&&(r=n.query.animeName),q.push("/anime/search?animeName="+r+"&page="+t)}}return(t,r)=>(l(),d("div",H,[s("div",V,[s("div",P,[(l(!0),d(g,null,f(p.value,(e,_)=>(l(),d("div",{class:"search_item",key:_},[s("div",j,[s("img",{src:e.img,alt:"",srcset:""},null,8,z)]),s("div",D,[s("a",{href:"#/anime/play?animeName="+e.name,class:"search_item_title"},u(e.name),9,E),s("div",R,u(e.vod_time)+" | "+u(e.vod_remarks),1),s("div",G,u(e.vod_class),1),s("div",J,u(e.vod_blurb),1)])]))),128))]),s("div",K,[s("div",O,[i.value.first_page?(l(),d("button",{key:0,class:"page_sel_btn",title:"First Page",onClick:r[0]||(r[0]=e=>c(1))},T)):w("",!0),(l(!0),d(g,null,f(i.value.pages2show,(e,_)=>(l(),d("button",{class:B(["page_sel_btn",{now_page:e==m.value}]),key:_,title:"Page "+e,onClick:a=>c(e)},u(e),11,U))),128)),i.value.last_page?(l(),d("button",{key:1,class:"page_sel_btn",title:"Last page",onClick:r[1]||(r[1]=e=>c(S(o).search_res_page_num))},X)):w("",!0)])])])]))}}),Z=I(Y,[["__scopeId","data-v-72456d02"]]),ee={class:"page_content"},se={class:"head_box"},te={class:"search_content_place"},oe=k({__name:"AnimeSearch",setup(h){const n=y(),o=x(),m=M();function p(){const i=n.query;if("animeName"in i){const c=i.animeName;if(c=="")return;let t=1;"page"in i?t=Number(i.page):m.search_anime(c),o.search_animes(c,t)}}return A(()=>n.query,()=>{p()},{deep:!0}),F(()=>{p()}),(i,c)=>(l(),d("div",ee,[s("div",se,[b(L)]),s("div",te,[b(Z)])]))}});export{oe as default};
