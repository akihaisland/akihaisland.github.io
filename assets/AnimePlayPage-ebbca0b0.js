import{I as ae}from"./InfoHead-e2677bf5.js";import{e as Q,u as le,f as ie,k as ne,q as $,g as p,w as j,l as ce,j as _e,s as W,o as c,c as _,a as e,i as G,h as J,t as l,F as m,r as g,v as M,n as k,d as re,D as ve,H as q,p as de,b as ue,_ as U,m as K}from"./index-85ec912d.js";const r=B=>(de("data-v-76a46a43"),B=B(),ue(),B),he={class:"anime_play_area"},pe={class:"video_page_pc_cont"},me={class:"main_cont_place"},ge={class:"left_col"},we={class:"col_content"},fe={class:"video_outer_box"},ye={class:"video_inner_box"},be={key:0,id:"pc_player",ref:"pc_player"},ke={class:"video_desc_box"},xe={class:"video_title"},Ce={class:"video_blurb"},$e={class:"anime_srcs_select_box"},Le=["onClick"],Ze={class:"select_episode_box"},Be=["onClick"],Ie={class:"right_col"},Se={class:"col_content"},Ve={class:"score_box"},Ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},He=["stroke-dasharray","stroke"],Me={class:"score_data"},qe={class:"score_dig"},Pe={class:"rank_dig"},Ae={class:"tags_box"},De={class:"attr_pair"},Te=r(()=>e("span",{class:"attr_title"}," 片名: ",-1)),je={class:"attr_pair"},Ee=r(()=>e("span",{class:"attr_title"}," 简介: ",-1)),Fe={class:"attr_pair"},Re=r(()=>e("span",{class:"attr_title"}," 总集数: ",-1)),ze={class:"attr_title"},Oe={class:"video_page_mobile_cont"},We={class:"video_inner_box"},Ge={key:0,id:"pc_player",ref:"pc_player"},Je={class:"video_info_bar"},Ke={class:"video_desc_box"},Qe={class:"video_btn_box"},Ue=re('<div class="video_btn" data-v-76a46a43><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512" data-v-76a46a43><path d="M17,12h-4v-2h4v2Zm0,3h-6v2h6v-2Zm4,6V2h-5.171c-.413-1.164-1.525-2-2.829-2h-2c-1.304,0-2.416,.836-2.829,2H3V21c0,1.654,1.346,3,3,3h12c1.654,0,3-1.346,3-3ZM10,4v-1c0-.551,.449-1,1-1h2c.551,0,1,.449,1,1v1h5V21c0,.551-.449,1-1,1H6c-.551,0-1-.449-1-1V4h5Zm-1,11h-2v2h2v-2Zm.838-3.481l2.759-2.702-1.399-1.429-2.533,2.48-1.241-1.192-1.386,1.442,1.45,1.393c.326,.326,.754,.488,1.181,.488,.425,0,.848-.161,1.168-.481Z" data-v-76a46a43></path></svg></div><div class="video_btn" data-v-76a46a43><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" data-v-76a46a43><path d="m24,5.917l-3.3,1.909,1.326,4.029-.75.523-3.261-2.521-3.275,2.532-.721-.543,1.304-4.076-3.323-1.848v-.922h4.35l1.178-4.5h.97l1.176,4.5h4.326v.917Zm-19-.917v2h5v-2h-5Zm7,4h-7v2h7v-2Zm-7,6h7v-2h-7v2Zm14,3h3v3c0,1.654-1.346,3-3,3H3.5c-1.93,0-3.5-1.57-3.5-3.5V3C0,1.346,1.346,0,3,0h11.13c-.915.507-1.716,1.189-2.366,2H3c-.551,0-1,.448-1,1v17.5c0,.827.673,1.5,1.5,1.5s1.5-.673,1.5-1.5v-2.5h12v-3.067c.327.043.661.067,1,.067s.672-.028,1-.069v3.069Zm1,2H7v.5c0,.536-.122,1.045-.338,1.5h12.338c.551,0,1-.448,1-1v-1Z" data-v-76a46a43></path></svg></div>',2),Xe={class:"video_btn score_btn"},Ye=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24"},[e("g",{style:{translate:"0 3px"}},[e("path",{d:"m20.5,11h-2c-.539,0-1.044.133-1.5.351v-4.851c0-1.93-1.57-3.5-3.5-3.5h-3c-1.93,0-3.5,1.57-3.5,3.5v2.851c-.456-.219-.961-.351-1.5-.351h-2c-1.93,0-3.5,1.57-3.5,3.5v5c0,1.93,1.57,3.5,3.5,3.5h17c1.93,0,3.5-1.57,3.5-3.5v-3c0-1.93-1.57-3.5-3.5-3.5ZM2,17.5v-5c0-.827.673-1.5,1.5-1.5h2c.827,0,1.5.673,1.5,1.5v6.5h-3.5c-.827,0-1.5-.673-1.5-1.5Zm7-11c0-.827.673-1.5,1.5-1.5h3c.827,0,1.5.673,1.5,1.5v12.5h-6V6.5Zm13,11c0,.827-.673,1.5-1.5,1.5h-3.5v-4.5c0-.827.673-1.5,1.5-1.5h2c.827,0,1.5.673,1.5,1.5v3Z"})])],-1)),es={class:"score_digit"},ss={class:"sel_srcs_box"},ts=r(()=>e("div",{class:"playing_bar"},null,-1)),os=r(()=>e("div",{class:"playing_bar"},null,-1)),as=r(()=>e("div",{class:"playing_bar"},null,-1)),ls=[ts,os,as],is={class:"select_episode_area"},ns={class:"select_episode_board"},cs={class:"select_episode_box"},_s=["onClick"],rs=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M7 0 L13 10 L7 20",style:{"stroke-width":"2",fill:"transparent"}})],-1)),vs=[rs],ds={class:"show_title"},us=r(()=>e("div",{class:"show_title_content"}," 选择集数 ",-1)),hs=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M0 15 L10 5 L20 15",style:{stroke:"#61666D","stroke-width":"2",fill:"transparent"}})],-1)),ps=[hs],ms={class:"full_select_episode_board"},gs=["onClick"],ws={class:"show_title"},fs=r(()=>e("div",{class:"show_title_content"}," 视频详情 ",-1)),ys=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M0 15 L10 5 L20 15",style:{stroke:"#61666D","stroke-width":"2",fill:"transparent"}})],-1)),bs=[ys],ks={class:"video_detail_content"},xs={class:"score_box"},Cs={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},$s=["stroke-dasharray","stroke"],Ls={class:"score_data"},Zs={class:"score_dig"},Bs={class:"rank_dig"},Is={class:"attr_pair"},Ss=r(()=>e("div",{class:"attr_title"}," 片名 ",-1)),Vs={class:"attr_val"},Ns={class:"attr_pair"},Hs=r(()=>e("div",{class:"attr_title"}," 简介 ",-1)),Ms={class:"attr_val"},qs={class:"attr_pair"},Ps=r(()=>e("div",{class:"attr_title"}," 总集数 ",-1)),As={class:"attr_val"},Ds={class:"attr_title"},Ts={class:"attr_val"},js={class:"show_title"},Es=r(()=>e("div",{class:"show_title_content"}," 选择资源 ",-1)),Fs=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M0 15 L10 5 L20 15",style:{stroke:"#61666D","stroke-width":"2",fill:"transparent"}})],-1)),Rs=[Fs],zs={class:"full_select_src_board"},Os=["onClick"],Ws=Q({__name:"AnimePlay",setup(B){const b=le(),L=ie(),X=ne();let I;const x=$(""),Y=$([]),u=$([]),i=$({}),d=$(0),v=$(0),w=p(()=>v.value<u.value.length&&v.value>=0?u.value[v.value].srcs.vod_play_url:[]),h=p(()=>v.value<u.value.length&&v.value>=0?u.value[v.value].srcs:{vod_name:"正在载入",vod_year:"正在载入",vod_area:"正在载入",vod_class:"正在载入",vod_blurb:"正在载入"}),ee=p(()=>{if(v.value<u.value.length&&v.value>=0){const s=u.value[v.value].srcs_idx;return L.anime_srcs_list[s]}else return"正在载入..."}),P=p(()=>{const s=[];for(let a=0;a<u.value.length;a++){const t=L.anime_srcs_list[u.value[a].srcs_idx];s.push(t)}return s});function A(s){s>=0&&s<P.value.length&&(v.value=s),(d.value>=w.value.length||d.value<0)&&(d.value=0)}function S(s){s<w.value.length&&s>=0&&(d.value=s)}async function V(){I!=null&&I!=null?(console.log("url: ",w.value[d.value].ep_link),I.switchVideo({url:w.value[d.value].ep_link,type:"hls",customType:{hls:function(s,a){if(q.isSupported()){const t=new q;t.loadSource(s.src),t.attachMedia(s)}else s.canPlayType("application/vnd.apple.mpegurl")}}},void 0)):(await W(),I=new ve({container:document.getElementById("pc_player"),screenshot:!0,video:{url:w.value[d.value].ep_link,type:"hls",customType:{hls:function(s,a){if(q.isSupported()){const t=new q;t.loadSource(s.src),t.attachMedia(s)}else s.canPlayType("application/vnd.apple.mpegurl")}}}})),x.value!=""&&X.play_anime(x.value,v.value,d.value,w.value[d.value].ep_name,u.value[0].srcs.vod_pic)}j(()=>b.query,()=>{V()}),j(()=>d.value,()=>{V()}),j(()=>v.value,()=>{V()});const se=p(()=>{const s=[];let a=0;if(i.value.tags!=null&&i.value.tags!=null){for(let o=0;o<i.value.tags.length;o++)a+=i.value.tags[o].count;let t=0;a>0&&(t=a/i.value.tags.length);for(let o=0;o<i.value.tags.length;o++)if(i.value.tags[o].count>=t){let n=i.value.tags[o].name;i.value.tags[o].count>0&&(n+="("+i.value.tags[o].count+")"),s.push({name:i.value.tags[o].name,count:i.value.tags[o].count,show:n})}}return s}),E=p(()=>{let s="";return i.value.summary!=null&&i.value.summary!=null&&(s=i.value.summary),s}),F=p(()=>{let s="";return i.value.name!=null&&i.value.name!=null&&(s=i.value.name),s}),R=p(()=>{let s="";return i.value.total_episodes!=null&&i.value.total_episodes!=null&&(s+=i.value.total_episodes),s}),z=p(()=>{const s=[];if(i.value.infobox!=null&&i.value.infobox!=null)for(let a=0;a<i.value.infobox.length;a++){const t=i.value.infobox[a],o={title:t.key,value:""};if(typeof t.value=="string")o.value=t.value;else for(let n=0;n<t.value.length;n++)n>0&&(o.value+=", "),o.value+=t.value[n].v;s.push(o)}return s}),D=["rgba(255,128,102,1)","rgba(255.0,156.22222222222223,102.0,1.0)","rgba(255.0,184.44444444444446,102.0,1.0)","rgba(255.0,212.66666666666666,102.0,1.0)","rgba(255.0,240.88888888888889,102.0,1.0)","rgba(240.88888888888889,255.0,102.0,1.0)","rgba(212.66666666666669,255.0,102.0,1.0)","rgba(184.44444444444446,255.0,102.0,1.0)","rgba(156.22222222222223,255.0,102.0,1.0)","rgba(128.0,255.0,102.0,1.0)"],C=p(()=>{let s=0,a=0,t=[];if(i.value.rating!=null&&i.value.rating!=null){const n=i.value.rating;s=n.score,a=n.rank;let Z=0,y=0;if(n.total!=0)for(const H of Object.values(n.count)){y+=1;let O=10;n.total!=0&&(O=H/n.total*100),t.push({stroke:"0,"+Z+",100",color:D[y-1]}),Z+=O}else{for(let H=0;H<9;H++)t.push({stroke:"0,0,100",color:D[y-1]});t.push({stroke:"1",color:D[y-1]})}}let o="#"+a;return a==0&&(o="No Rank Info"),{score:s,rank:o,score_pie:t}}),N=$(0);function f(s){N.value=s}function te(s){const a=[];for(let n=0;n<s.length;n++){const Z=s[n].srcs.vod_class.split(",");for(let y=0;y<Z.length;y++)Z[y]!=""&&a.push(Z[y])}const t=Array.from(new Set(a)),o=[];for(let n=0;n<t.length;n++)o.push({name:t[n],count:0});return o}async function oe(s){let a=!1;for(let o=0;o<s.length;o++)if(s[o].srcs.vod_class.includes("动画")){a=!0;break}if(a)try{i.value=await L.obtain_anime_bgm_detail(x.value);return}catch{console.log("[Error] No Bangumi Data!")}const t={date:s[0].srcs.vod_time,images:{small:s[0].srcs.vod_pic,grid:s[0].srcs.vod_pic,large:s[0].srcs.vod_pic,medium:s[0].srcs.vod_pic,common:s[0].srcs.vod_pic},summary:s[0].srcs.vod_blurb,name:s[0].srcs.vod_name,name_cn:s[0].srcs.vod_name,tags:te(s),rating:{rank:0,total:0,count:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},score:s[0].srcs.vod_douban_score},total_episodes:s[0].srcs.vod_serial,infobox:[{key:"演员",value:s[0].srcs.vod_actor},{key:"导演",value:s[0].srcs.vod_director},{key:"编剧",value:s[0].srcs.vod_writer}]};i.value=t}let T=!0;return ce(async()=>{window.innerWidth<780&&(T=!1),"animeName"in b.query?x.value=b.query.animeName:x.value="",x.value==""&&_e.push("/anime/search");const s=await L.obtain_anime_detail(x.value);u.value=L.get_anime_srcs(s.anime),Y.value=s.srcs_classes,oe(u.value),"srcIdx"in b.query&&A(Number(b.query.srcIdx)),"epIdx"in b.query&&S(Number(b.query.epIdx)),await W(),V()}),(s,a)=>(c(),_("div",he,[e("div",pe,[e("div",me,[e("div",ge,[e("div",we,[e("div",fe,[e("div",ye,[G(T)?(c(),_("div",be,null,512)):J("",!0)])]),e("div",ke,[e("h2",xe,l(h.value.vod_name),1),e("div",Ce,l(h.value.vod_year)+" | "+l(h.value.vod_area)+" | "+l(h.value.vod_class)+" | "+l(h.value.vod_blurb)+" ",1)]),e("div",$e,[(c(!0),_(m,null,g(P.value,(t,o)=>(c(),_("span",{class:k(["anime_src_item",{select_item:v.value==o}]),key:o,onClick:n=>A(o)},l(t),11,Le))),128))]),e("div",Ze,[(c(!0),_(m,null,g(w.value,(t,o)=>(c(),_("span",{class:k(["episode_item",{select_item:d.value==o}]),key:o,onClick:n=>S(o)},l(t.ep_name),11,Be))),128))])])]),e("div",Ie,[e("div",Se,[e("div",Ve,[(c(),_("svg",Ne,[(c(!0),_(m,null,g(C.value.score_pie,(t,o)=>(c(),_("circle",{cx:"18",cy:"18",r:"16","stroke-width":"4",key:o,"stroke-dasharray":t.stroke,fill:"transparent",stroke:t.color},null,8,He))),128))])),e("div",Me,[e("div",qe,l(C.value.score),1),e("div",Pe,l(C.value.rank),1)])]),e("div",Ae,[(c(!0),_(m,null,g(se.value,(t,o)=>(c(),_("span",{class:"tag_item",key:o},l(t.show),1))),128))]),e("div",De,[Te,M(" "+l(F.value),1)]),e("div",je,[Ee,M(" "+l(E.value),1)]),e("div",Fe,[Re,M(" "+l(R.value),1)]),(c(!0),_(m,null,g(z.value,(t,o)=>(c(),_("div",{class:"attr_pair",key:o},[e("span",ze,l(t.title)+": ",1),M(" "+l(t.value),1)]))),128))])])])]),e("div",Oe,[e("div",{class:"video_outer_box",onClick:a[0]||(a[0]=t=>f(0))},[e("div",We,[G(T)?J("",!0):(c(),_("div",Ge,null,512))])]),e("div",Je,[e("div",Ke,[e("h2",{class:"video_title",onClick:a[1]||(a[1]=t=>f(3))},l(h.value.vod_name),1),e("div",{class:"video_blurb",onClick:a[2]||(a[2]=t=>f(3))},l(h.value.vod_year)+" | "+l(h.value.vod_area)+" | "+l(h.value.vod_class)+" | "+l(h.value.vod_blurb),1)]),e("div",Qe,[Ue,e("div",Xe,[Ye,e("div",es,l(C.value.score),1)])]),e("div",ss,[e("div",{class:"sel_src_title",onClick:a[3]||(a[3]=t=>f(2))},l(ee.value),1),e("div",{class:"now_play_anime",onClick:a[4]||(a[4]=t=>f(2))},ls)]),e("div",is,[e("div",ns,[e("div",cs,[(c(!0),_(m,null,g(w.value,(t,o)=>(c(),_("span",{class:k(["episode_item",{select_item:d.value==o}]),key:o,onClick:n=>S(o)},l(t.ep_name),11,_s))),128))])]),e("div",{class:"episodes_complete_show_btn",onClick:a[5]||(a[5]=t=>f(1))},vs)]),e("div",{class:k(["episodes_complete_show",{c_show:N.value==1}])},[e("div",ds,[us,e("div",{class:"show_title_btn",onClick:a[6]||(a[6]=t=>f(0))},ps)]),e("div",ms,[(c(!0),_(m,null,g(w.value,(t,o)=>(c(),_("div",{class:k(["full_episode_item",{select_item:d.value==o}]),key:o,onClick:n=>S(o)},l(t.ep_name),11,gs))),128))])],2),e("div",{class:k(["video_detail_show",{c_show:N.value==3}])},[e("div",ws,[fs,e("div",{class:"show_title_btn",onClick:a[7]||(a[7]=t=>f(0))},bs)]),e("div",ks,[e("div",xs,[(c(),_("svg",Cs,[(c(!0),_(m,null,g(C.value.score_pie,(t,o)=>(c(),_("circle",{cx:"18",cy:"18",r:"16","stroke-width":"4",key:o,"stroke-dasharray":t.stroke,fill:"transparent",stroke:t.color},null,8,$s))),128))])),e("div",Ls,[e("div",Zs,l(C.value.score),1),e("div",Bs," # "+l(C.value.rank),1)])]),e("div",Is,[Ss,e("div",Vs,l(F.value),1)]),e("div",Ns,[Hs,e("div",Ms,l(E.value),1)]),e("div",qs,[Ps,e("div",As,l(R.value),1)]),(c(!0),_(m,null,g(z.value,(t,o)=>(c(),_("div",{class:"attr_pair",key:o},[e("div",Ds,l(t.title),1),e("div",Ts,l(t.value),1)]))),128))])],2),e("div",{class:k(["srcs_complete_show",{c_show:N.value==2}])},[e("div",js,[Es,e("div",{class:"show_title_btn",onClick:a[8]||(a[8]=t=>f(0))},Rs)]),e("div",zs,[(c(!0),_(m,null,g(P.value,(t,o)=>(c(),_("div",{class:k(["full_src_item",{select_item:v.value==o}]),key:o,onClick:n=>A(o)},l(t),11,Os))),128))])],2)])])]))}}),Gs=U(Ws,[["__scopeId","data-v-76a46a43"]]),Js={class:"page_box"},Ks={class:"head_where"},Qs={class:"page_where"},Us=Q({__name:"AnimePlayPage",setup(B){return(b,L)=>(c(),_("div",Js,[e("div",Ks,[K(ae)]),e("div",Qs,[K(Gs)])]))}}),et=U(Us,[["__scopeId","data-v-dd9a528e"]]);export{et as default};
